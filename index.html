<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IDK My Budget - Debt Tracker</title>
    <style>
        :root {
            --primary-start: #2c5f7a;
            --primary-end: #1a3a4a;
            --accent-primary: #0d9488;
            --accent-secondary: #0f766e;
            --accent-bg: #f0fdfa;
            --balance-start: #0d9488;
            --balance-end: #0f766e;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--primary-start) 0%, var(--primary-end) 100%);
            min-height: 100vh;
            padding: 0;
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
            min-height: 100vh;
            background: white;
            box-shadow: 0 0 50px rgba(0,0,0,0.2);
        }

        /* Login Screen */
        .login-screen {
            padding: 40px 20px;
            text-align: center;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, var(--primary-start) 0%, var(--primary-end) 100%);
        }

        .login-screen h1 {
            color: white;
            font-size: 3em;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .login-screen p {
            color: rgba(255,255,255,0.9);
            margin-bottom: 40px;
            font-size: 0.95em;
            font-style: italic;
            line-height: 1.4;
            max-width: 300px;
        }

        .google-signin-btn {
            background: white;
            color: #333;
            padding: 15px 40px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            transition: all 0.2s;
            margin: 0 auto;
        }

        .google-signin-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .google-icon {
            width: 24px;
            height: 24px;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary-start) 0%, var(--primary-end) 100%);
            color: white;
            padding: 25px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left {
            display: flex;
            align-items: center;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .theme-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.2em;
            transition: background 0.2s;
        }

        .theme-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid white;
        }

        .logout-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background 0.2s;
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        /* Main Content */
        .main-content {
            padding: 100px 20px 80px 20px;
        }

        /* Financial Overview Card */
        .total-balance {
            background: linear-gradient(135deg, var(--balance-start) 0%, var(--balance-end) 100%);
            border-radius: 16px;
            padding: 25px;
            color: white;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(13, 148, 136, 0.2);
        }

        .total-balance h2 {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 15px;
            font-weight: 500;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .balance-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .balance-item h3 {
            font-size: 0.75em;
            opacity: 0.8;
            margin-bottom: 5px;
            font-weight: 400;
        }

        .balance-item .amount {
            font-size: 1.4em;
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        /* Debts/Bills Section */
        .accounts-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .account-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .account-card:hover {
            border-color: var(--accent-primary);
            box-shadow: 0 3px 10px rgba(13, 148, 136, 0.2);
            transform: translateY(-2px);
        }

        .account-card.selected {
            border-color: var(--accent-primary);
            background: var(--accent-bg);
        }

        .account-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
        }

        .account-info h4 {
            color: #333;
            font-size: 1.3em;
            margin-bottom: 5px;
        }

        .debt-type-badge {
            font-size: 0.75em;
            color: #666;
            background: #f0f0f0;
            padding: 3px 8px;
            border-radius: 4px;
            display: inline-block;
            margin-top: 3px;
        }

        .recurring-badge {
            background: #ffc107;
            color: #333;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.75em;
            font-weight: bold;
            margin-left: 5px;
        }

        .account-actions {
            display: flex;
            gap: 5px;
        }

        .icon-btn {
            background: none;
            border: none;
            font-size: 1.2em;
            cursor: pointer;
            padding: 5px;
            opacity: 0.6;
            transition: all 0.2s;
        }

        .icon-btn:hover {
            opacity: 1;
            transform: scale(1.1);
        }

        .delete-btn {
            color: #dc2626;
        }

        .account-bottom {
            border-top: 1px solid #eee;
            padding-top: 10px;
            margin-top: 10px;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9em;
        }

        .detail-label {
            color: #666;
        }

        .detail-value {
            font-weight: 600;
            color: #333;
        }

        .account-balance {
            color: var(--accent-primary);
            font-size: 1.5em;
            font-weight: 700;
            margin-top: 5px;
        }

        .add-account-btn {
            width: 100%;
            padding: 15px;
            background: white;
            border: 2px dashed var(--accent-primary);
            color: var(--accent-primary);
            border-radius: 12px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            margin-top: 10px;
            transition: all 0.2s;
        }

        .add-account-btn:hover {
            background: var(--accent-bg);
        }

        /* Action Buttons */
        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 25px 0;
        }

        .action-btn {
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 0.95em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            color: white;
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Transactions */
        .transactions-section {
            margin-top: 30px;
        }

        .transactions-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .transaction-item {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .transaction-info {
            flex: 1;
        }

        .transaction-type {
            font-size: 0.85em;
            color: #666;
            margin-bottom: 3px;
        }

        .transaction-desc {
            font-weight: 600;
            color: #333;
            margin-bottom: 3px;
        }

        .transaction-date {
            font-size: 0.8em;
            color: #999;
        }

        .transaction-amount {
            font-size: 1.2em;
            font-weight: 700;
        }

        .transaction-amount.positive {
            color: var(--accent-primary);
        }

        .transaction-amount.negative {
            color: #f59e0b;
        }

        .no-transactions {
            text-align: center;
            color: #999;
            padding: 40px 20px;
            font-style: italic;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.6);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px 20px;
            max-width: 400px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-content h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            color: #666;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 0.9em;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1em;
            transition: border-color 0.2s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--accent-primary);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
        }

        /* Emoji Picker */
        .emoji-picker {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 8px;
            margin: 10px 0;
        }

        .emoji-btn {
            font-size: 1.8em;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.2s;
        }

        .emoji-btn:hover {
            transform: scale(1.1);
            border-color: var(--accent-primary);
        }

        .emoji-btn.selected {
            border-color: var(--accent-primary);
            background: var(--accent-bg);
            transform: scale(1.1);
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }

        .modal-btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .modal-btn.primary {
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
            color: white;
        }

        .modal-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(13, 148, 136, 0.4);
        }

        .modal-btn.secondary {
            background: #f0f0f0;
            color: #666;
        }

        .modal-btn.secondary:hover {
            background: #e0e0e0;
        }

        /* Theme Modal */
        .theme-option {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .theme-option:hover {
            border-color: var(--accent-primary);
            background: #f9fafb;
        }

        .theme-option.selected {
            border-color: var(--accent-primary);
            background: var(--accent-bg);
        }

        .theme-preview {
            width: 80px;
            height: 50px;
            border-radius: 8px;
            display: flex;
            overflow: hidden;
        }

        .theme-preview-color {
            flex: 1;
        }

        .theme-name {
            font-weight: 600;
            color: #333;
        }

        .hidden {
            display: none;
        }

        /* Footer */
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #333;
            color: white;
            padding: 12px 20px;
            text-align: center;
            font-size: 0.85em;
            z-index: 999;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }

        .footer a {
            color: #a8edea;
            text-decoration: none;
            cursor: pointer;
            margin-left: 5px;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        /* Disclaimer Drawer */
        .disclaimer-drawer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            z-index: 1001;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.3);
        }

        .disclaimer-drawer.open {
            max-height: 80vh;
            overflow-y: auto;
        }

        .disclaimer-content {
            padding: 30px 20px 80px 20px;
            max-width: 600px;
            margin: 0 auto;
        }

        .disclaimer-content h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
            text-align: center;
        }

        .disclaimer-content p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
            text-align: justify;
        }

        .disclaimer-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.8em;
            cursor: pointer;
            color: #999;
            padding: 5px 10px;
        }

        .disclaimer-close:hover {
            color: #333;
        }

        .disclaimer-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .disclaimer-overlay.active {
            display: block;
        }

        /* Responsive */
        @media (max-width: 480px) {
            .balance-item .amount {
                font-size: 1.2em;
            }

            .emoji-picker {
                grid-template-columns: repeat(6, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <h1>üí∏ IDK My Budget</h1>
        <p>A debt tracker app for<br>tracking your debts in an app</p>
        <button class="google-signin-btn" onclick="signInWithGoogle()">
            <svg class="google-icon" viewBox="0 0 24 24">
                <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
            </svg>
            Sign in with Google
        </button>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="container hidden">
        <div class="header">
            <div class="header-left">
                <button class="theme-btn" onclick="showThemeModal()" title="Change Theme">üé®</button>
            </div>
            <div class="header-right">
                <img id="userAvatar" class="user-avatar" src="" alt="User">
                <button class="logout-btn" onclick="signOut()">Logout</button>
            </div>
        </div>

        <div class="main-content">
            <!-- Financial Overview -->
            <div class="total-balance">
                <h2>Financial Overview</h2>
                <div class="balance-grid">
                    <div class="balance-item">
                        <h3>Total Debt</h3>
                        <div class="amount" id="totalDebt">$0.00</div>
                    </div>
                    <div class="balance-item">
                        <h3>Monthly Bills</h3>
                        <div class="amount" id="totalBills">$0.00</div>
                    </div>
                    <div class="balance-item">
                        <h3>Monthly Payments</h3>
                        <div class="amount" id="totalPayments">$0.00</div>
                    </div>
                    <div class="balance-item">
                        <h3>Avg Interest</h3>
                        <div class="amount" id="avgInterest">0.0%</div>
                    </div>
                </div>
            </div>

            <!-- Debts/Bills List -->
            <div class="accounts-section">
                <h3>Debt & Bill Avatars</h3>
                <div id="debtsList"></div>
                <button class="add-account-btn" onclick="showAddDebtModal()">+ Add a Debt or Bill Avatar</button>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="action-btn" onclick="showPaymentModal()" id="paymentBtn" disabled>
                    Make Payment
                </button>
                <button class="action-btn" onclick="showAdjustModal()" id="adjustBtn" disabled>
                    Adjust Balance
                </button>
            </div>

            <!-- Payment History -->
            <div class="transactions-section">
                <h3>Payment History</h3>
                <div id="transactionsList"></div>
            </div>
        </div>
    </div>

    <!-- Add Debt/Bill Modal -->
    <div id="addDebtModal" class="modal">
        <div class="modal-content">
            <h2>Add Debt or Bill</h2>
            <div class="form-group">
                <label>Name</label>
                <input type="text" id="debtName" placeholder="e.g., Chase Credit Card">
            </div>
            <div class="form-group">
                <label>Pick an Emoji</label>
                <div class="emoji-picker" id="emojiPicker">
                    <button type="button" class="emoji-btn selected" data-emoji="üí≥">üí≥</button>
                    <button type="button" class="emoji-btn" data-emoji="üí∞">üí∞</button>
                    <button type="button" class="emoji-btn" data-emoji="üí∏">üí∏</button>
                    <button type="button" class="emoji-btn" data-emoji="üè¶">üè¶</button>
                    <button type="button" class="emoji-btn" data-emoji="üè†">üè†</button>
                    <button type="button" class="emoji-btn" data-emoji="üöó">üöó</button>
                    <button type="button" class="emoji-btn" data-emoji="‚ö°">‚ö°</button>
                    <button type="button" class="emoji-btn" data-emoji="üì±">üì±</button>
                    <button type="button" class="emoji-btn" data-emoji="üí°">üí°</button>
                    <button type="button" class="emoji-btn" data-emoji="üéì">üéì</button>
                    <button type="button" class="emoji-btn" data-emoji="üõí">üõí</button>
                    <button type="button" class="emoji-btn" data-emoji="üéØ">üéØ</button>
                    <button type="button" class="emoji-btn" data-emoji="üì∫">üì∫</button>
                    <button type="button" class="emoji-btn" data-emoji="üéµ">üéµ</button>
                    <button type="button" class="emoji-btn" data-emoji="üî•">üî•</button>
                    <button type="button" class="emoji-btn" data-emoji="‚≠ê">‚≠ê</button>
                </div>
                <input type="hidden" id="selectedEmoji" value="üí≥">
            </div>
            <div class="form-group">
                <label>Type</label>
                <select id="debtType">
                    <option value="credit-card">Credit Card</option>
                    <option value="personal-loan">Personal Loan</option>
                    <option value="car-loan">Car Loan</option>
                    <option value="student-loan">Student Loan</option>
                    <option value="mortgage">Mortgage</option>
                    <option value="utilities">Utilities</option>
                    <option value="subscription">Subscription</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div class="form-group">
                <label>Current Balance</label>
                <input type="number" id="debtBalance" placeholder="0.00" step="0.01" value="0">
            </div>
            <div class="form-group">
                <label>Interest Rate (%)</label>
                <input type="number" id="debtInterest" placeholder="0.0" step="0.01" value="0">
            </div>
            <div class="form-group">
                <label>Monthly Payment</label>
                <input type="number" id="debtPayment" placeholder="0.00" step="0.01" value="0">
            </div>
            <div class="form-group">
                <label style="display: flex; align-items: center; cursor: pointer;">
                    <input type="checkbox" id="isRecurring" style="margin-right: 8px; width: auto;">
                    This is a recurring bill
                </label>
            </div>
            <div class="modal-buttons">
                <button class="modal-btn secondary" onclick="closeModal('addDebtModal')">Cancel</button>
                <button class="modal-btn primary" onclick="addDebt()">Add</button>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div id="paymentModal" class="modal">
        <div class="modal-content">
            <h2>Make Payment</h2>
            <div class="form-group">
                <label>Amount</label>
                <input type="number" id="paymentAmount" placeholder="0.00" step="0.01">
            </div>
            <div class="form-group">
                <label>Description</label>
                <input type="text" id="paymentDesc" placeholder="Monthly payment, extra payment, etc.">
            </div>
            <div class="modal-buttons">
                <button class="modal-btn secondary" onclick="closeModal('paymentModal')">Cancel</button>
                <button class="modal-btn primary" onclick="makePayment()">Pay</button>
            </div>
        </div>
    </div>

    <!-- Adjust Balance Modal -->
    <div id="adjustModal" class="modal">
        <div class="modal-content">
            <h2>Adjust Balance</h2>
            <div class="form-group">
                <label>New Balance</label>
                <input type="number" id="adjustBalance" placeholder="0.00" step="0.01">
            </div>
            <div class="form-group">
                <label>Reason</label>
                <input type="text" id="adjustReason" placeholder="e.g., Statement correction, refinance">
            </div>
            <div class="modal-buttons">
                <button class="modal-btn secondary" onclick="closeModal('adjustModal')">Cancel</button>
                <button class="modal-btn primary" onclick="adjustBalance()">Update</button>
            </div>
        </div>
    </div>

    <!-- Theme Modal -->
    <div id="themeModal" class="modal">
        <div class="modal-content">
            <h2>Choose Your Vibe</h2>
            <div class="theme-option" onclick="setTheme('default')">
                <div class="theme-preview">
                    <div class="theme-preview-color" style="background: #2c5f7a"></div>
                    <div class="theme-preview-color" style="background: #0d9488"></div>
                    <div class="theme-preview-color" style="background: #f59e0b"></div>
                </div>
                <div class="theme-name">Teal & Navy (Default)</div>
            </div>
            <div class="theme-option" onclick="setTheme('classic')">
                <div class="theme-preview">
                    <div class="theme-preview-color" style="background: #000"></div>
                    <div class="theme-preview-color" style="background: #fff; border: 1px solid #ddd;"></div>
                    <div class="theme-preview-color" style="background: #000"></div>
                </div>
                <div class="theme-name">Classic Black & White</div>
            </div>
            <div class="theme-option" onclick="setTheme('ocean')">
                <div class="theme-preview">
                    <div class="theme-preview-color" style="background: #0c4a6e"></div>
                    <div class="theme-preview-color" style="background: #0ea5e9"></div>
                    <div class="theme-preview-color" style="background: #06b6d4"></div>
                </div>
                <div class="theme-name">Ocean Blue</div>
            </div>
            <div class="theme-option" onclick="setTheme('royal')">
                <div class="theme-preview">
                    <div class="theme-preview-color" style="background: #1e3a8a"></div>
                    <div class="theme-preview-color" style="background: #6366f1"></div>
                    <div class="theme-preview-color" style="background: #a855f7"></div>
                </div>
                <div class="theme-name">Royal Purple & Blue</div>
            </div>
            <div class="theme-option" onclick="setTheme('purple')">
                <div class="theme-preview">
                    <div class="theme-preview-color" style="background: #581c87"></div>
                    <div class="theme-preview-color" style="background: #a855f7"></div>
                    <div class="theme-preview-color" style="background: #ec4899"></div>
                </div>
                <div class="theme-name">Deep Purple</div>
            </div>
            <div class="theme-option" onclick="setTheme('pink')">
                <div class="theme-preview">
                    <div class="theme-preview-color" style="background: #fce7f3"></div>
                    <div class="theme-preview-color" style="background: #ec4899"></div>
                    <div class="theme-preview-color" style="background: #fff"></div>
                </div>
                <div class="theme-name">Light Pink & White</div>
            </div>
            <div class="theme-option" onclick="setTheme('monochrome')">
                <div class="theme-preview">
                    <div class="theme-preview-color" style="background: #000"></div>
                    <div class="theme-preview-color" style="background: #ef4444"></div>
                    <div class="theme-preview-color" style="background: #fff"></div>
                </div>
                <div class="theme-name">Black Red White</div>
            </div>
            <div class="theme-option" onclick="setTheme('forest')">
                <div class="theme-preview">
                    <div class="theme-preview-color" style="background: #064e3b"></div>
                    <div class="theme-preview-color" style="background: #10b981"></div>
                    <div class="theme-preview-color" style="background: #fbbf24"></div>
                </div>
                <div class="theme-name">Forest Green</div>
            </div>
            <div class="theme-option" onclick="setTheme('sunset')">
                <div class="theme-preview">
                    <div class="theme-preview-color" style="background: #7c2d12"></div>
                    <div class="theme-preview-color" style="background: #f97316"></div>
                    <div class="theme-preview-color" style="background: #fbbf24"></div>
                </div>
                <div class="theme-name">Sunset Orange</div>
            </div>
            <div class="modal-buttons">
                <button class="modal-btn secondary" onclick="closeModal('themeModal')">Close</button>
            </div>
        </div>
    </div>

    <!-- Disclaimer Overlay -->
    <div id="disclaimerOverlay" class="disclaimer-overlay" onclick="closeDisclaimer()"></div>

    <!-- Disclaimer Drawer -->
    <div id="disclaimerDrawer" class="disclaimer-drawer">
        <button class="disclaimer-close" onclick="closeDisclaimer()">√ó</button>
        <div class="disclaimer-content">
            <h3>Disclaimer</h3>
            <p>This application is provided for personal tracking purposes only and is not intended to serve as financial advice or as a substitute for professional financial planning services. IDK My Budget is not a licensed financial application and should not be treated as such.</p>
            <p>Users are solely responsible for the accuracy of data entered and any financial decisions made. Never enter real banking credentials, account numbers, or sensitive financial information into this application.</p>
            <p>Logic Nerds and its affiliates assume no liability for any losses, damages, or consequences arising from the use or misuse of this application. This software is provided "as is" without warranty of any kind, express or implied.</p>
            <p>By using this application, you acknowledge and accept full responsibility for your financial decisions and data security.</p>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        ¬© 2026 Logic Nerds. All Rights Reserved. | <a onclick="openDisclaimer()">Disclaimer</a>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut as firebaseSignOut } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getFirestore, collection, addDoc, updateDoc, deleteDoc, doc, query, where, getDocs, onSnapshot, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDtBO48uBogqcdv69VO9IH7MIG8Kb1YG10",
            authDomain: "idk-money-tracker.firebaseapp.com",
            projectId: "idk-money-tracker",
            storageBucket: "idk-money-tracker.firebasestorage.app",
            messagingSenderId: "1033439716188",
            appId: "1:1033439716188:web:ebf8c149f68d3d568f9799",
            measurementId: "G-KEZSNJZ4JW"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // Global variables
        let currentUser = null;
        let debts = [];
        let transactions = [];
        let selectedDebt = null;
        let selectedEmojiValue = 'üí≥';
        let unsubscribeDebts = null;
        let unsubscribeTransactions = null;

        // Make functions globally available
        window.signInWithGoogle = signInWithGoogle;
        window.signOut = signOut;
        window.showAddDebtModal = showAddDebtModal;
        window.addDebt = addDebt;
        window.selectDebt = selectDebt;
        window.deleteDebt = deleteDebt;
        window.showPaymentModal = showPaymentModal;
        window.makePayment = makePayment;
        window.showAdjustModal = showAdjustModal;
        window.adjustBalance = adjustBalance;
        window.closeModal = closeModal;
        window.showThemeModal = showThemeModal;
        window.setTheme = setTheme;
        window.openDisclaimer = openDisclaimer;
        window.closeDisclaimer = closeDisclaimer;

        // Auth state observer
        onAuthStateChanged(auth, (user) => {
            if (user) {
                currentUser = user;
                showMainApp();
                loadUserData();
            } else {
                currentUser = null;
                showLoginScreen();
            }
        });

        // Sign in with Google
        async function signInWithGoogle() {
            const provider = new GoogleAuthProvider();
            try {
                await signInWithPopup(auth, provider);
            } catch (error) {
                console.error('Sign in error:', error);
                alert('Sign in failed. Please try again.');
            }
        }

        // Sign out
        async function signOut() {
            if (confirm('Are you sure you want to sign out?')) {
                try {
                    if (unsubscribeDebts) unsubscribeDebts();
                    if (unsubscribeTransactions) unsubscribeTransactions();
                    await firebaseSignOut(auth);
                } catch (error) {
                    console.error('Sign out error:', error);
                    alert('Sign out failed. Please try again.');
                }
            }
        }

        // Show/hide screens
        function showLoginScreen() {
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('mainApp').classList.add('hidden');
        }

        function showMainApp() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            
            if (currentUser.photoURL) {
                document.getElementById('userAvatar').src = currentUser.photoURL;
            }
        }

        // Load user data
        function loadUserData() {
            const debtsQuery = query(
                collection(db, 'debts'),
                where('userId', '==', currentUser.uid)
            );
            
            unsubscribeDebts = onSnapshot(debtsQuery, (snapshot) => {
                debts = [];
                snapshot.forEach((doc) => {
                    debts.push({ id: doc.id, ...doc.data() });
                });
                updateUI();
            });

            const transactionsQuery = query(
                collection(db, 'debtTransactions'),
                where('userId', '==', currentUser.uid)
            );
            
            unsubscribeTransactions = onSnapshot(transactionsQuery, (snapshot) => {
                transactions = [];
                snapshot.forEach((doc) => {
                    transactions.push({ id: doc.id, ...doc.data() });
                });
                updateUI();
            });
        }

        // Emoji picker setup
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.emoji-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    selectedEmojiValue = this.getAttribute('data-emoji');
                    document.getElementById('selectedEmoji').value = selectedEmojiValue;
                    
                    document.querySelectorAll('.emoji-btn').forEach(b => b.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });
        });

        // Debt management
        function showAddDebtModal() {
            document.getElementById('addDebtModal').classList.add('active');
            document.getElementById('debtName').value = '';
            document.getElementById('debtBalance').value = '0';
            document.getElementById('debtInterest').value = '0';
            document.getElementById('debtPayment').value = '0';
            document.getElementById('isRecurring').checked = false;
            selectedEmojiValue = 'üí≥';
            
            document.querySelectorAll('.emoji-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            document.querySelector('.emoji-btn').classList.add('selected');
        }

        async function addDebt() {
            const name = document.getElementById('debtName').value.trim();
            const balance = parseFloat(document.getElementById('debtBalance').value) || 0;
            const interest = parseFloat(document.getElementById('debtInterest').value) || 0;
            const payment = parseFloat(document.getElementById('debtPayment').value) || 0;
            const type = document.getElementById('debtType').value;
            const isRecurring = document.getElementById('isRecurring').checked;
            const emoji = selectedEmojiValue;
            
            if (!name) {
                alert('Please enter a name for this debt/bill!');
                return;
            }

            try {
                await addDoc(collection(db, 'debts'), {
                    userId: currentUser.uid,
                    name: name,
                    emoji: emoji,
                    type: type,
                    balance: balance,
                    interest: interest,
                    payment: payment,
                    isRecurring: isRecurring,
                    createdAt: serverTimestamp()
                });
                
                closeModal('addDebtModal');
            } catch (error) {
                console.error('Error adding debt:', error);
                alert('Failed to add debt/bill. Please try again.');
            }
        }

        function selectDebt(debtId) {
            selectedDebt = debtId;
            updateUI();
        }

        async function deleteDebt(debtId, event) {
            event.stopPropagation();
            
            const debt = debts.find(d => d.id === debtId);
            
            if (confirm(`Delete ${debt.emoji} ${debt.name}?`)) {
                try {
                    await deleteDoc(doc(db, 'debts', debtId));
                    
                    const transactionsQuery = query(
                        collection(db, 'debtTransactions'),
                        where('debtId', '==', debtId)
                    );
                    const transactionsSnapshot = await getDocs(transactionsQuery);
                    transactionsSnapshot.forEach(async (docSnapshot) => {
                        await deleteDoc(doc(db, 'debtTransactions', docSnapshot.id));
                    });
                    
                    if (selectedDebt === debtId) {
                        selectedDebt = null;
                    }
                } catch (error) {
                    console.error('Error deleting debt:', error);
                    alert('Failed to delete. Please try again.');
                }
            }
        }

        // Payment management
        function showPaymentModal() {
            if (!selectedDebt) return;
            
            document.getElementById('paymentModal').classList.add('active');
            document.getElementById('paymentAmount').value = '';
            document.getElementById('paymentDesc').value = '';
        }

        async function makePayment() {
            const amount = parseFloat(document.getElementById('paymentAmount').value);
            const desc = document.getElementById('paymentDesc').value.trim() || 'Payment';
            
            if (!amount || amount <= 0) {
                alert('Please enter a valid payment amount!');
                return;
            }

            const debt = debts.find(d => d.id === selectedDebt);
            
            if (amount > debt.balance) {
                if (!confirm('Payment is more than the balance. Continue?')) {
                    return;
                }
            }

            try {
                await addDoc(collection(db, 'debtTransactions'), {
                    userId: currentUser.uid,
                    debtId: selectedDebt,
                    type: 'payment',
                    amount: -amount,
                    description: desc,
                    date: serverTimestamp()
                });

                await updateDoc(doc(db, 'debts', selectedDebt), {
                    balance: Math.max(0, debt.balance - amount)
                });
                
                closeModal('paymentModal');
            } catch (error) {
                console.error('Error making payment:', error);
                alert('Failed to record payment. Please try again.');
            }
        }

        function showAdjustModal() {
            if (!selectedDebt) return;
            
            const debt = debts.find(d => d.id === selectedDebt);
            document.getElementById('adjustModal').classList.add('active');
            document.getElementById('adjustBalance').value = debt.balance;
            document.getElementById('adjustReason').value = '';
        }

        async function adjustBalance() {
            const newBalance = parseFloat(document.getElementById('adjustBalance').value);
            const reason = document.getElementById('adjustReason').value.trim() || 'Balance adjustment';
            
            if (newBalance < 0) {
                alert('Balance cannot be negative!');
                return;
            }

            const debt = debts.find(d => d.id === selectedDebt);
            const difference = newBalance - debt.balance;

            try {
                await addDoc(collection(db, 'debtTransactions'), {
                    userId: currentUser.uid,
                    debtId: selectedDebt,
                    type: 'adjustment',
                    amount: difference,
                    description: reason,
                    date: serverTimestamp()
                });

                await updateDoc(doc(db, 'debts', selectedDebt), {
                    balance: newBalance
                });
                
                closeModal('adjustModal');
            } catch (error) {
                console.error('Error adjusting balance:', error);
                alert('Failed to adjust balance. Please try again.');
            }
        }

        // UI updates
        function updateUI() {
            updateFinancialOverview();
            updateDebtsList();
            updateTransactionsList();
            updateActionButtons();
        }

        function updateFinancialOverview() {
            let totalDebt = 0;
            let totalBills = 0;
            let totalPayments = 0;
            let totalInterest = 0;
            let debtCount = 0;

            debts.forEach(debt => {
                if (debt.isRecurring) {
                    totalBills += debt.payment;  // Sum of monthly payments for recurring bills
                } else {
                    totalDebt += debt.balance;
                    totalInterest += debt.interest;
                    debtCount++;
                }
                totalPayments += debt.payment;  // Grand total of ALL monthly payments
            });

            document.getElementById('totalDebt').textContent = '$' + totalDebt.toFixed(2);
            document.getElementById('totalBills').textContent = '$' + totalBills.toFixed(2);
            document.getElementById('totalPayments').textContent = '$' + totalPayments.toFixed(2);
            document.getElementById('avgInterest').textContent = debtCount > 0 
                ? (totalInterest / debtCount).toFixed(1) + '%' 
                : '0.0%';
        }

        function updateDebtsList() {
            const list = document.getElementById('debtsList');
            list.innerHTML = '';
            
            debts.forEach(debt => {
                const card = document.createElement('div');
                card.className = 'account-card' + (selectedDebt === debt.id ? ' selected' : '');
                card.onclick = () => selectDebt(debt.id);
                
                const typeLabel = debt.type.split('-').map(word => 
                    word.charAt(0).toUpperCase() + word.slice(1)
                ).join(' ');
                
                card.innerHTML = `
                    <div class="account-header">
                        <div class="account-info">
                            <h4>${debt.emoji} ${debt.name}</h4>
                            <div>
                                <span class="debt-type-badge">${typeLabel}</span>
                                ${debt.isRecurring ? '<span class="recurring-badge">RECURRING</span>' : ''}
                            </div>
                        </div>
                        <div class="account-actions">
                            <button class="icon-btn delete-btn" onclick="deleteDebt('${debt.id}', event)" title="Delete">üóëÔ∏è</button>
                        </div>
                    </div>
                    <div class="account-bottom">
                        <div class="detail-row">
                            <span class="detail-label">Balance:</span>
                            <span class="detail-value">$${debt.balance.toFixed(2)}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Interest:</span>
                            <span class="detail-value">${debt.interest.toFixed(2)}%</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Monthly Payment:</span>
                            <span class="detail-value">$${debt.payment.toFixed(2)}</span>
                        </div>
                    </div>
                `;
                
                list.appendChild(card);
            });
        }

        function updateTransactionsList() {
            const list = document.getElementById('transactionsList');
            
            if (!selectedDebt) {
                list.innerHTML = '<div class="no-transactions">Select a debt/bill to see payment history</div>';
                return;
            }

            const debtTransactions = transactions
                .filter(t => t.debtId === selectedDebt)
                .sort((a, b) => {
                    const aDate = a.date?.toDate ? a.date.toDate() : new Date(a.date);
                    const bDate = b.date?.toDate ? b.date.toDate() : new Date(b.date);
                    return bDate - aDate;
                })
                .slice(0, 10);
            
            if (debtTransactions.length === 0) {
                list.innerHTML = '<div class="no-transactions">No payments yet</div>';
                return;
            }

            list.innerHTML = '';
            debtTransactions.forEach(transaction => {
                const item = document.createElement('div');
                item.className = 'transaction-item';
                
                const typeLabel = transaction.type === 'payment' ? 'Payment' : 'Adjustment';
                
                const date = transaction.date?.toDate ? transaction.date.toDate() : new Date(transaction.date);
                const dateStr = date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                
                item.innerHTML = `
                    <div class="transaction-info">
                        <div class="transaction-type">${typeLabel}</div>
                        <div class="transaction-desc">${transaction.description}</div>
                        <div class="transaction-date">${dateStr}</div>
                    </div>
                    <div class="transaction-amount ${transaction.amount >= 0 ? 'negative' : 'positive'}">
                        ${transaction.amount >= 0 ? '+' : ''}$${Math.abs(transaction.amount).toFixed(2)}
                    </div>
                `;
                
                list.appendChild(item);
            });
        }

        function updateActionButtons() {
            const hasDebt = selectedDebt !== null;
            document.getElementById('paymentBtn').disabled = !hasDebt;
            document.getElementById('adjustBtn').disabled = !hasDebt;
        }

        // Utility functions
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Disclaimer drawer functions
        function openDisclaimer() {
            document.getElementById('disclaimerDrawer').classList.add('open');
            document.getElementById('disclaimerOverlay').classList.add('active');
        }

        function closeDisclaimer() {
            document.getElementById('disclaimerDrawer').classList.remove('open');
            document.getElementById('disclaimerOverlay').classList.remove('active');
        }

        // Theme management
        const themes = {
            default: {
                primaryStart: '#2c5f7a',
                primaryEnd: '#1a3a4a',
                accentPrimary: '#0d9488',
                accentSecondary: '#0f766e',
                accentBg: '#f0fdfa',
                balanceStart: '#0d9488',
                balanceEnd: '#0f766e'
            },
            classic: {
                primaryStart: '#000000',
                primaryEnd: '#000000',
                accentPrimary: '#000000',
                accentSecondary: '#000000',
                accentBg: '#ffffff',
                balanceStart: '#000000',
                balanceEnd: '#000000'
            },
            monochrome: {
                primaryStart: '#000000',
                primaryEnd: '#1a1a1a',
                accentPrimary: '#ef4444',
                accentSecondary: '#dc2626',
                accentBg: '#fee2e2',
                balanceStart: '#000000',
                balanceEnd: '#1a1a1a'
            },
            pink: {
                primaryStart: '#fce7f3',
                primaryEnd: '#fbcfe8',
                accentPrimary: '#ec4899',
                accentSecondary: '#db2777',
                accentBg: '#fce7f3',
                balanceStart: '#fce7f3',
                balanceEnd: '#fbcfe8'
            },
            purple: {
                primaryStart: '#581c87',
                primaryEnd: '#3b0764',
                accentPrimary: '#a855f7',
                accentSecondary: '#9333ea',
                accentBg: '#f3e8ff',
                balanceStart: '#a855f7',
                balanceEnd: '#9333ea'
            },
            ocean: {
                primaryStart: '#0c4a6e',
                primaryEnd: '#082f49',
                accentPrimary: '#0ea5e9',
                accentSecondary: '#0284c7',
                accentBg: '#e0f2fe',
                balanceStart: '#0ea5e9',
                balanceEnd: '#0284c7'
            },
            royal: {
                primaryStart: '#1e3a8a',
                primaryEnd: '#1e1b4b',
                accentPrimary: '#6366f1',
                accentSecondary: '#4f46e5',
                accentBg: '#e0e7ff',
                balanceStart: '#6366f1',
                balanceEnd: '#4f46e5'
            },
            forest: {
                primaryStart: '#064e3b',
                primaryEnd: '#022c22',
                accentPrimary: '#10b981',
                accentSecondary: '#059669',
                accentBg: '#d1fae5',
                balanceStart: '#10b981',
                balanceEnd: '#059669'
            },
            sunset: {
                primaryStart: '#7c2d12',
                primaryEnd: '#431407',
                accentPrimary: '#f97316',
                accentSecondary: '#ea580c',
                accentBg: '#ffedd5',
                balanceStart: '#f97316',
                balanceEnd: '#ea580c'
            }
        };

        function showThemeModal() {
            document.getElementById('themeModal').classList.add('active');
        }

        function setTheme(themeName) {
            const theme = themes[themeName];
            if (!theme) return;

            const root = document.documentElement;
            root.style.setProperty('--primary-start', theme.primaryStart);
            root.style.setProperty('--primary-end', theme.primaryEnd);
            root.style.setProperty('--accent-primary', theme.accentPrimary);
            root.style.setProperty('--accent-secondary', theme.accentSecondary);
            root.style.setProperty('--accent-bg', theme.accentBg);
            root.style.setProperty('--balance-start', theme.balanceStart);
            root.style.setProperty('--balance-end', theme.balanceEnd);

            localStorage.setItem('idkBudgetTheme', themeName);
            closeModal('themeModal');
        }

        // Load saved theme
        window.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('idkBudgetTheme') || 'default';
            if (savedTheme && themes[savedTheme]) {
                setTheme(savedTheme);
            }
        });
    </script>
</body>
</html>
